@using MadWorld.Frontend.UI.Shared.Components
@using MadWorld.Shared.Contracts.Anonymous.Blog
@using LanguageExt.SomeHelp

@page "/Blog/{Id?}"

@if (IsReady)
{
    <RadzenTemplateForm Data="@Blog" Submit="@(async (BlogDetailContract blog) => { await SaveChanges(blog); })">
    <RadzenRow>
        <RadzenColumn Size="12">
            <RadzenStack>
                <RadzenFieldset Text="Blog Details">
                    <RadzenStack Gap="1rem">
                        @if (!IsNewBlog)
                        {
                            <RadzenRow AlignItems="AlignItems.Center">
                                <RadzenColumn Size="12" SizeMD="4">
                                    <RadzenLabel Text="Id"/>
                                </RadzenColumn>
                                <RadzenColumn Size="12" SizeMD="8">
                                    <RadzenTextBox Name="blog-id" @bind-Value="Blog.Id" Disabled="true" class="col-width-100"></RadzenTextBox>
                                </RadzenColumn>
                            </RadzenRow>
                        }
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="12" SizeMD="4">
                                <RadzenLabel Text="Title"/>
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="8">
                                <RadzenTextBox Name="blog-title" @bind-Value="Blog.Title" class="col-width-100"></RadzenTextBox>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenHtmlEditor @bind-Value="@BodyUtf8" style="height: 500px; width: 100%">
                                <RadzenHtmlEditorUndo/>
                                <RadzenHtmlEditorRedo/>
                                <RadzenHtmlEditorSeparator/>
                                <RadzenHtmlEditorBold/>
                                <RadzenHtmlEditorItalic/>
                                <RadzenHtmlEditorUnderline/>
                                <RadzenHtmlEditorStrikeThrough/>
                                <RadzenHtmlEditorSeparator/>
                                <RadzenHtmlEditorColor/>
                                <RadzenHtmlEditorBackground/>
                                <RadzenHtmlEditorRemoveFormat/>
                            </RadzenHtmlEditor>
                        </RadzenRow>
                    </RadzenStack>
                </RadzenFieldset>
            </RadzenStack>
        </RadzenColumn>
    </RadzenRow>
    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem" Class="rz-mt-8 rz-mb-4">
        <RadzenButton ButtonType="ButtonType.Submit" Size="ButtonSize.Large" Icon="save" Text="Save" />
        <RadzenButton ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat" Size="ButtonSize.Large" Icon="cancel" Text="Cancel" Click="@CancelChanges" />
    </RadzenStack>
</RadzenTemplateForm>
}
else
{
    <LoadingSpinner />
}
